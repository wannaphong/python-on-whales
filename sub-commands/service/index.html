<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>docker service - Python on whales</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

        <script src="../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">Python on whales</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href="../../docker_client/" class="nav-link">Docker client</a>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Sub-commands <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../buildx/" class="dropdown-item">docker buildx</a>
</li>
                                    
<li>
    <a href="../compose/" class="dropdown-item">docker compose</a>
</li>
                                    
<li>
    <a href="../config/" class="dropdown-item">docker config</a>
</li>
                                    
<li>
    <a href="../container/" class="dropdown-item">docker container</a>
</li>
                                    
<li>
    <a href="../context/" class="dropdown-item">docker context</a>
</li>
                                    
<li>
    <a href="../image/" class="dropdown-item">docker image</a>
</li>
                                    
<li>
    <a href="../manifest/" class="dropdown-item">docker manifest</a>
</li>
                                    
<li>
    <a href="../network/" class="dropdown-item">docker network</a>
</li>
                                    
<li>
    <a href="../node/" class="dropdown-item">docker node</a>
</li>
                                    
<li>
    <a href="../plugin/" class="dropdown-item">docker plugin</a>
</li>
                                    
<li>
    <a href="../secret/" class="dropdown-item">docker secret</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active">docker service</a>
</li>
                                    
<li>
    <a href="../stack/" class="dropdown-item">docker stack</a>
</li>
                                    
<li>
    <a href="../swarm/" class="dropdown-item">docker swarm</a>
</li>
                                    
<li>
    <a href="../system/" class="dropdown-item">docker system</a>
</li>
                                    
<li>
    <a href="../task/" class="dropdown-item">docker task</a>
</li>
                                    
<li>
    <a href="../trust/" class="dropdown-item">docker trust</a>
</li>
                                    
<li>
    <a href="../volume/" class="dropdown-item">docker volume</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">Docker objects <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../docker_objects/builders/" class="dropdown-item">Builders</a>
</li>
                                    
<li>
    <a href="../../docker_objects/configs/" class="dropdown-item">Configs</a>
</li>
                                    
<li>
    <a href="../../docker_objects/containers/" class="dropdown-item">Containers</a>
</li>
                                    
<li>
    <a href="../../docker_objects/images/" class="dropdown-item">Images</a>
</li>
                                    
<li>
    <a href="../../docker_objects/networks/" class="dropdown-item">Networks</a>
</li>
                                    
<li>
    <a href="../../docker_objects/nodes/" class="dropdown-item">Nodes</a>
</li>
                                    
<li>
    <a href="../../docker_objects/plugins/" class="dropdown-item">Plugins</a>
</li>
                                    
<li>
    <a href="../../docker_objects/secrets/" class="dropdown-item">Secrets</a>
</li>
                                    
<li>
    <a href="../../docker_objects/services/" class="dropdown-item">Services</a>
</li>
                                    
<li>
    <a href="../../docker_objects/stacks/" class="dropdown-item">Stacks</a>
</li>
                                    
<li>
    <a href="../../docker_objects/tasks/" class="dropdown-item">Tasks</a>
</li>
                                    
<li>
    <a href="../../docker_objects/volumes/" class="dropdown-item">Volumes</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">User guide <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../user_guide/docker_run/" class="dropdown-item">docker.run() guide</a>
</li>
                                    
<li>
    <a href="../../user_guide/generic_resources/" class="dropdown-item">Swarm generic resources</a>
</li>
                                    
<li>
    <a href="../../user_guide/running_python_on_whales_inside_a_container/" class="dropdown-item">Running python-on-whales inside a container</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../secret/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../stack/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="2"><a href="#create" class="nav-link">create</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="2"><a href="#exists" class="nav-link">exists</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="2"><a href="#inspect" class="nav-link">inspect</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="2"><a href="#list" class="nav-link">list</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="2"><a href="#logs" class="nav-link">logs</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="2"><a href="#ps" class="nav-link">ps</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="2"><a href="#remove" class="nav-link">remove</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="2"><a href="#rollback" class="nav-link">rollback</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="2"><a href="#scale" class="nav-link">scale</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-level="2"><a href="#update" class="nav-link">update</a>
              <ul class="nav flex-column">
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h2 id="create">create</h2>
<pre><code class="python">docker.service.create(
    image,
    command,
    cap_add=[],
    cap_drop=[],
    constraints=[],
    detach=False,
    dns=[],
    dns_options=[],
    dns_search=[],
    endpoint_mode=None,
    entrypoint=None,
    envs={},
    env_files=[],
    generic_resources=[],
    groups=[],
    healthcheck=True,
    health_cmd=None,
    health_interval=None,
    health_retries=None,
    health_start_period=None,
    health_timeout=None,
    hosts={},
    hostname=None,
    init=False,
    isolation=None,
    labels={},
    limit_cpu=None,
    limit_memory=None,
    limit_pids=None,
    log_driver=None,
)
</code></pre>

<p>Creates a Docker swarm service.</p>
<p>Consider using 'docker stack deploy' instead as it's idempotent and
easier to read for complex applications.
docker stack deploy is basically docker compose for swarm clusters.</p>
<p><strong>Arguments:</strong></p>
<p>image: The image to use as the base for the service.
command: The command to execute in the container(s).</p>
<hr />
<h2 id="exists">exists</h2>
<pre><code class="python">docker.service.exists(x)
</code></pre>

<p>Verify that a service exists.</p>
<p>It's just calling <code>docker.service.inspect(...)</code> and verifies that it doesn't throw
 a <code>python_on_whales.exceptions.NoSuchService</code>.</p>
<p><strong>Returns</strong></p>
<p>A <code>bool</code></p>
<hr />
<h2 id="inspect">inspect</h2>
<pre><code class="python">docker.service.inspect(x)
</code></pre>

<p>Returns one or a list of <code>python_on_whales.Service</code> object(s).</p>
<p><strong>Raises</strong></p>
<p><code>python_on_whales.exceptions.NoSuchService</code> if one of the services
doesn't exists.</p>
<hr />
<h2 id="list">list</h2>
<pre><code class="python">docker.service.list()
</code></pre>

<p>Returns the list of services</p>
<p><strong>Returns</strong></p>
<p>A <code>List[python_on_whales.Services]</code></p>
<hr />
<h2 id="logs">logs</h2>
<pre><code class="python">docker.service.logs(
    service,
    details=False,
    since=None,
    tail=None,
    timestamps=False,
    follow=False,
    raw=False,
    task_ids=True,
    resolve=True,
    truncate=True,
    stream=False,
)
</code></pre>

<p>Returns the logs of a service as a string or an iterator.</p>
<p><strong>Arguments</strong></p>
<ul>
<li><strong>service</strong> <code>Union[str, python_on_whales.Service]</code>: The service to get the logs of</li>
<li><strong>details</strong> <code>bool</code>: Show extra details provided to logs</li>
<li><strong>since</strong> <code>Union[None, datetime.datetime, datetime.timedelta]</code>: Use a datetime or timedelta to specify the lower
    date limit for the logs.</li>
<li><strong>tail</strong> <code>Optional[int]</code>: Number of lines to show from the end of the logs (default all)</li>
<li><strong>timestamps</strong> <code>bool</code>: Put timestamps next to lines.</li>
<li><strong>follow</strong> <code>bool</code>: If <code>False</code> (the default), the logs returned are the logs up to the time
    of the function call. If <code>True</code>, the logs of the container up to the time the
    service is stopped (removed) are displayed.
    Which is why you must use the <code>stream</code> option if you use the <code>follow</code> option.
    Without <code>stream</code>, only a <code>str</code> will be returned, possibly much later in the
    future (maybe never if the service is never removed). So this option is not
    possible (You'll get an error if you use follow and not stream).
    With <code>stream</code>, you'll be able to read the logs in real time and stop
    whenever you need.</li>
<li><strong>stream</strong> <code>bool</code>: Similar to the <code>stream</code> argument of <code>docker.run()</code>.
    This function will then returns and iterator that will yield a
    tuple <code>(source, content)</code> with <code>source</code> being <code>"stderr"</code> or
    <code>"stdout"</code>. <code>content</code> is the content of the line as bytes.
    Take a look at <a href="https://gabrieldemarmiesse.github.io/python-on-whales/user_guide/docker_run/#stream-the-output">the user guide</a>
    to have an example of the output.</li>
</ul>
<p><strong>Returns</strong></p>
<p><code>str</code> if <code>stream=False</code> (the default), <code>Iterable[Tuple[str, bytes]]</code>
if <code>stream=True</code>.</p>
<p><strong>Raises</strong></p>
<p><code>python_on_whales.exceptions.NoSuchService</code> if the service does not exists.</p>
<hr />
<h2 id="ps">ps</h2>
<pre><code class="python">docker.service.ps(x)
</code></pre>

<p>Returns the list of swarm tasks associated with this service.</p>
<p>You can pass multiple services at once at this function.</p>
<pre><code class="python">from python_on_whales import docker

tasks = docker.service.ps(&quot;my-service-name&quot;)
print(tasks[0].desired_state)
# running
</code></pre>

<p><strong>Arguments</strong></p>
<ul>
<li><strong>x</strong> <code>Union[str, python_on_whales.Service, List[Union[str, python_on_whales.Service]]]</code>: One or more services (can be id, name or <code>python_on_whales.Service</code> object.)</li>
</ul>
<p><strong>Returns</strong></p>
<p><code>List[python_on_whales.Task]</code></p>
<p><strong>Raises</strong></p>
<p><code>python_on_whales.exceptions.NoSuchService</code> if one of the services
doesn't exists.</p>
<hr />
<h2 id="remove">remove</h2>
<pre><code class="python">docker.service.remove(services)
</code></pre>

<p>Removes a service</p>
<p><strong>Arguments</strong></p>
<ul>
<li><strong>services</strong> <code>Union[str, python_on_whales.Service, List[Union[str, python_on_whales.Service]]]</code>: One or a list of services to remove.</li>
</ul>
<p><strong>Raises</strong></p>
<p><code>python_on_whales.exceptions.NoSuchService</code> if one of the services
doesn't exists.</p>
<hr />
<h2 id="rollback">rollback</h2>
<pre><code class="python">docker.service.rollback()
</code></pre>

<p>Not yet implemented</p>
<hr />
<h2 id="scale">scale</h2>
<pre><code class="python">docker.service.scale(new_scales, detach=False)
</code></pre>

<p>Scale one or more services.</p>
<p><strong>Arguments</strong></p>
<ul>
<li><strong>new_scales</strong> <code>Dict[Union[str, python_on_whales.Service], int]</code>: Mapping between services and the desired scales. For example
    you can provide <code>new_scale={"service1": 4, "service2": 8}</code></li>
<li><strong>detach</strong> <code>bool</code>: If True, does not wait for the services to converge and return
    immediately.</li>
</ul>
<p><strong>Raises</strong></p>
<p><code>python_on_whales.exceptions.NoSuchService</code> if one of the services
doesn't exists.</p>
<hr />
<h2 id="update">update</h2>
<pre><code class="python">docker.service.update(service, detach=False, force=False, image=None, with_registry_authentication=False)
</code></pre>

<p>Update a service</p>
<p>More options coming soon</p>
<p><strong>Arguments</strong></p>
<ul>
<li><strong>service</strong> <code>Union[str, python_on_whales.Service]</code>: The service to update</li>
<li><strong>detach</strong> <code>bool</code>: Exit immediately instead of waiting for the service to converge</li>
<li><strong>force</strong> <code>bool</code>: Force update even if no changes require it</li>
<li><strong>image</strong> <code>Optional[str]</code>: Service image tag</li>
<li><strong>with_registry_authentication</strong> <code>bool</code>: Send registry authentication details
    to swarm agents</li>
</ul>
<p><strong>Raises</strong></p>
<p><code>python_on_whales.exceptions.NoSuchService</code> if the service doesn't exists.</p>
<hr /></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js" defer></script>
        <script src="../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
